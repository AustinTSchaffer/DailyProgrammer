# Color Sort Puzzle Automation

![](./images/Color%20Sort%20Puzzle%20Solver%20Example.gif)

This was a project that I did as a result of hours of frustration with those water/ball color
sorting games that are all over Google Play and the Apple App Store. Past a certain size, there's
no real human intuition that you can leverage which would allow you to find the quickest solution, or
really any acyclic path through the game space which doesn't require you to restart from the beginning. 
Restarting the game is usually a free action in these games, but often results in an advertisement.

To combat this I wrote a pretty simple solver that takes a game state and finds a solution state
using a Breadth First Search. Then I wrote up a computer vision script using OpenCV which finds
the locations of all of the balls and vessels in a screenshot\* of the game\*\*, and converts
that information into the data classes required by the solver I wrote in the first step. Then,
I used an [Android Debug Bridge (`adb`)](https://developer.android.com/tools/adb) to automate
grabbing screenshots from my phone from my laptop. Then I took

1. the screenshot automatically grabbed over an `adb` session,
2. the OpenCV script which translates the image into dataclasses,
3. the automatic solver script which outputs the moves required to solve the game state optimally,
4. the mappings between the pixels in the image to the dataclasses generated by the OpenCV script, and
5. the same `adb` session from Step 1

to automatically generate clicks on my phone, solving the level totally automatically, with no human
invervention.

...then I uninstalled the game.

\* taken on exactly my non-flagship Samsumg phone with exactly my display settings

\*\* exactly the same version of the variant of the game that I had installed

Enjoy!
